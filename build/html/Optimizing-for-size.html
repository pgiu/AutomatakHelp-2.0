<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>&lt;no title&gt; &mdash; Automatak DNP3 Help 1.0.x documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.x',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Automatak DNP3 Help 1.0.x documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Automatak DNP3 Help 1.0.x documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p>OpenDNP3 has a few bells and whistles that allow you optimize your binary for size on embedded systems. Here&#8217;s a summary of options that you can feed to the configure script:</p>
<ul class="simple">
<li><strong>&#8211;enable-opendnp3nomaster</strong> - Strips out the master from Makefile.am for embedded systems that only need the outstation. This configure option defines the directive OPENDNP3_NO_MASTER which strips out references to the master from the channel interface.</li>
<li><strong>&#8211;enable-opendnp3noserial</strong> - Strips out serial port support from Makefile.am for embedded systems that only need IP connectivity. This configure option defines the direction OPENDNP3_NO_SERIAL which strips out references to serial class from the DNP3Manager class.</li>
<li><strong>&#8211;enable-opendnp3nomocks</strong> - OpenDNP3 contains a few interface reference implementations shared by demos and tests. This configure options strips these out.</li>
<li><strong>-DOPENDNP3_SUPPRESS_LOG_LOCATION</strong> - For debugging purposes, file and line number location gets compiled into the library as string literals. This can be stripped out with this directive.</li>
<li><strong>-DOPENDNP3_STRIP_LOG_MESSAGES</strong> - Strips out log messages, associated ToString functions and exception descriptions.</li>
<li><strong>-DOPENDNP3_LIMIT_VISIBILITY</strong> - Marks internal classes / functions as such. This allows the compiler to reduce the size of the symbol table and results in faster load times as well. This option is not set by default, because the test suite needs access to internal classes.</li>
</ul>
<p>Feeding all of these options to configure and optimizing for size would look like:
<tt class="docutils literal"><span class="pre">`</span>
<span class="pre">$</span> <span class="pre">./configure</span> <span class="pre">--enable-opendnp3nomaster</span> <span class="pre">--enable-opendnp3nomocks</span> <span class="pre">--enable-opendnp3noserial</span> <span class="pre">&quot;CXXFLAGS=-Os</span> <span class="pre">-DOPENDNP3_SUPPRESS_LOG_LOCATION</span> <span class="pre">-DOPENDNP3_STRIP_LOG_MESSAGES</span> <span class="pre">-DOPENDNP3_LIMIT_VISIBILITY&quot;</span>
<span class="pre">`</span></tt></p>
<p>When you go to install your library don&#8217;t forget to strip it to further reduce the size:
<tt class="docutils literal"><span class="pre">`</span>
<span class="pre">$</span> <span class="pre">sudo</span> <span class="pre">make</span> <span class="pre">install-strip</span>
<span class="pre">`</span></tt></p>
<p>As of 02/23/13 this process produced the following x86 library size with G++4.7:</p>
<p><tt class="docutils literal"><span class="pre">`</span>
<span class="pre">757416</span> <span class="pre">Feb</span> <span class="pre">23</span> <span class="pre">19:56</span> <span class="pre">/usr/lib/libopendnp3.so.1.0.1</span>
<span class="pre">`</span></tt></p>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/Optimizing-for-size.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Automatak DNP3 Help 1.0.x documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Alan Crain.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>